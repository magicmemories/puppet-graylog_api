# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Defined types**

* [`graylog_api::grok::pattern_file`](#graylog_apigrokpattern_file): Loads a full file worth of Grok patterns into Graylog. Since Grok patterns
can contain numerous characters that would require escaping in either Hiera
data or Puppet code, it's usually more convienient to keep them in their
own dedicated files.

Note that if you load multiple files, and more than one such file defines
a pattern with the same name, this will lead to a duplicate declaration
error.
* [`graylog_api::input::beats`](#graylog_apiinputbeats): Defines a Beats input. This is the Beats input from Graylog 2.x, still
available in Graylog 3.x as 'Beats (deprecated)'. For the new Beats input
introduced in Graylog 3.0, see graylog_api::input::beats2
* [`graylog_api::input::beats2`](#graylog_apiinputbeats2): Defines a Beats input. This is the new Beats input introduced in Graylog 3.
For the prior Beats input (still available in as 'Beats (deprecated)'), see
graylog_api::input::beats.
* [`graylog_api::input::gelf_http`](#graylog_apiinputgelf_http): Defines an input accepting GELF-formatted JSON over HTTP POST.
* [`graylog_api::input::gelf_tcp`](#graylog_apiinputgelf_tcp): Defines an input accepting GELF over TCP, optionally encrypted with TLS.
* [`graylog_api::input::gelf_udp`](#graylog_apiinputgelf_udp): Defines an input accepting GELF over UDP.
* [`graylog_api::input::syslog_udp`](#graylog_apiinputsyslog_udp): Defines an input accepting Syslog messages over UDP.
* [`graylog_api::pipeline`](#graylog_apipipeline): Define a processing pipeline. A convenience wrapper around graylog_pipeline
which prevents certain errors.
NOTE: This class is a work in progress in many ways. It's probably smarter
to use graylog_pipeline directly until this has been fleshed out more.
The main problem is that this defined type doesn't allow assigning stages
an explicit priority, insteading giving them priority in order counting
from 1.
* [`graylog_api::pipeline::rule`](#graylog_apipipelinerule): Defines a pipeline rule. A convenience wrapper around graylog_pipeline_rule
which ensures no mismatch between the name in the rule source and the name
of the resource.

**Resource types**

* [`graylog_api`](#graylog_api): This sets the API credentials used by the rest of the types in the module to communicate with the Graylog API. It does not actually represent
* [`graylog_grok_pattern`](#graylog_grok_pattern): Installs a Grok pattern. Note that when representing Grok patterns in Puppet code or YAML-formatted Hiera data, extra escaping is necessary f
* [`graylog_index_set`](#graylog_index_set): Creates and configures an Index Set. Use the name 'Default index set' to configure the pre-existing default index set created for new install
* [`graylog_input`](#graylog_input): Creates a new input. This type covers the raw API and is agnostic to the type of input being created. In most cases, you should declare input
* [`graylog_ldap_settings`](#graylog_ldap_settings): Configures LDAP authentication, include the mapping between LDAP Groups and Graylog Roles. Make sure you also configure the Graylog Roles the
* [`graylog_lookup_adapter`](#graylog_lookup_adapter): Creates a Lookup Table Data Adapter.  Example:    graylog_lookup_adapter { 'example-adapter':     ensure        => present,     display_name 
* [`graylog_lookup_cache`](#graylog_lookup_cache): Creates a Lookup Table Cache.  Example:    graylog_lookup_cache { 'example-cache':     ensure        => present,     display_name  => 'Exampl
* [`graylog_lookup_table`](#graylog_lookup_table): Configures a Lookup Table.  Example:    graylog_lookup_table { 'example-data':     ensure                    => present,     display_name    
* [`graylog_pipeline`](#graylog_pipeline): Creates a processing pipeline. This type takes the pipeline definition as source text; note that the pipeline name in the source text must ma
* [`graylog_pipeline_rule`](#graylog_pipeline_rule): Creates a Pipeline Rule. Note that the rule name given in the rule source must match the name of the resource as well. You may opt to use the
* [`graylog_role`](#graylog_role): A user role definition. Note that the Admin and Reader roles are built-in and cannot be modified.  Example:    graylog_role { 'example':     
* [`graylog_stream`](#graylog_stream): Creates a Stream configuration.  Example:    graylog_stream { 'example':     description => 'An example stream.',     rules       => [       

## Defined types

### graylog_api::grok::pattern_file

Loads a full file worth of Grok patterns into Graylog. Since Grok patterns
can contain numerous characters that would require escaping in either Hiera
data or Puppet code, it's usually more convienient to keep them in their
own dedicated files.

Note that if you load multiple files, and more than one such file defines
a pattern with the same name, this will lead to a duplicate declaration
error.

#### Examples

##### Loading a patterns file

```puppet
graylog_api::grok::pattern_file { 'example patterns':
  contents => file('profile/graylog/patterns/example_patterns'),
}
```

#### Parameters

The following parameters are available in the `graylog_api::grok::pattern_file` defined type.

##### `contents`

Data type: `String`

A multi-line string containing at most one Grok pattern per line. Lines
containing only whitespace, or whose first non-whitespace character is a #,
are safely skipped. Actual pattern lines begin with the pattern name in
all-caps, followed by a space, followed by the pattern itself. See the
Graylog documentation for a full description of the Grok pattern format.

### graylog_api::input::beats

Defines a Beats input. This is the Beats input from Graylog 2.x, still
available in Graylog 3.x as 'Beats (deprecated)'. For the new Beats input
introduced in Graylog 3.0, see graylog_api::input::beats2

#### Parameters

The following parameters are available in the `graylog_api::input::beats` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 5044.

Default value: 5044

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 1 MB.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

##### `tcp_keepalive`

Data type: `Boolean`

Whether to enable TCP keepalive packets. Default is false.

Default value: `false`

##### `tls_cert_file`

Data type: `String`

The path to the server certificate to use when securing the connection with
TLS. Has no effect unless tls_enable is true. Defaults to the empty string.
Note that this must be the entire certificate chain, and that Graylog is
sensitive to exact formatting of PEM certificates, e.g. there must be a
trailing newline.

Default value: ''

##### `tls_client_auth`

Data type: `String`

Whether to use TLS to authenticate clients. Can be 'disabled', 'optional',
or 'required'. Defaults to 'disabled'.

Default value: 'disabled'

##### `tls_client_auth_cert_file`

Data type: `String`

The path to the file (or directory) which stores the certificates of
trusted clients. Has no effect if tls_client_auth is 'disabled' or
tls_enable is false. Defaults to the empty string.

Default value: ''

##### `tls_enable`

Data type: `Boolean`

Whether to enable TLS for securing the input.

Default value: `false`

##### `tls_key_file`

Data type: `String`

The path to the private key which corresponds to the tls_cert_file. Has no
effect if tls_enable is false. Defaults to the empty string. Note that
for PEM private keys, Graylog is sensitive to exact formatting, e.g. there
must be a trailing newline.

Default value: ''

##### `tls_key_password`

Data type: `String`

The password to decrypt to private key specified in tls_key_file. Leave
blank if not using TLS, or if the key is not encrypted. Defaults to the
empty string.

Default value: ''

### graylog_api::input::beats2

Defines a Beats input. This is the new Beats input introduced in Graylog 3.
For the prior Beats input (still available in as 'Beats (deprecated)'), see
graylog_api::input::beats.

#### Parameters

The following parameters are available in the `graylog_api::input::beats2` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 5044.

Default value: 5044

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 1 MB.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

##### `tcp_keepalive`

Data type: `Boolean`

Whether to enable TCP keepalive packets. Default is false.

Default value: `false`

##### `tls_cert_file`

Data type: `String`

The path to the server certificate to use when securing the connection with
TLS. Has no effect unless tls_enable is true. Defaults to the empty string.
Note that this must be the entire certificate chain, and that Graylog is
sensitive to exact formatting of PEM certificates, e.g. there must be a
trailing newline.

Default value: ''

##### `tls_client_auth`

Data type: `String`

Whether to use TLS to authenticate clients. Can be 'disabled', 'optional',
or 'required'. Defaults to 'disabled'.

Default value: 'disabled'

##### `tls_client_auth_cert_file`

Data type: `String`

The path to the file (or directory) which stores the certificates of
trusted clients. Has no effect if tls_client_auth is 'disabled' or
tls_enable is false. Defaults to the empty string.

Default value: ''

##### `tls_enable`

Data type: `Boolean`

Whether to enable TLS for securing the input.

Default value: `false`

##### `tls_key_file`

Data type: `String`

The path to the private key which corresponds to the tls_cert_file. Has no
effect if tls_enable is false. Defaults to the empty string. Note that
for PEM private keys, Graylog is sensitive to exact formatting, e.g. there
must be a trailing newline.

Default value: ''

##### `tls_key_password`

Data type: `String`

The password to decrypt to private key specified in tls_key_file. Leave
blank if not using TLS, or if the key is not encrypted. Defaults to the
empty string.

Default value: ''

### graylog_api::input::gelf_http

Defines an input accepting GELF-formatted JSON over HTTP POST.

#### Parameters

The following parameters are available in the `graylog_api::input::gelf_http` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `decompress_size_limit`

Data type: `Integer`

The maximum number of bytes of decompressed message data will be accepted
in a single POST. Defaults to 8 megabytes.

Default value: .to_bytes

##### `enable_cors`

Data type: `Boolean`

Whether the input should send CORS headers to satisfy browser security
policies. Defaults to true.

Default value: `true`

##### `idle_writer_timeout`

Data type: `Integer`

How long the server should wait to receive additional messages from the
client before closing the connection, in seconds. Set to 0 to disable.
Default value is 60 seconds.

Default value: 60

##### `max_chunk_size`

Data type: `Integer`

The maximum HTTP chunk size in bytes (e. g. length of HTTP request body).
Default value is 65536 bytes.

Default value: 65536

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 12280.

Default value: 12280

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 1 MB.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

##### `tcp_keepalive`

Data type: `Boolean`

Whether to enable TCP keepalive packets. Default is false.

Default value: `false`

##### `tls_cert_file`

Data type: `String`

The path to the server certificate to use when securing the connection with
TLS. Has no effect unless tls_enable is true. Defaults to the empty string.
Note that this must be the entire certificate chain, and that Graylog is
sensitive to exact formatting of PEM certificates, e.g. there must be a
trailing newline.

Default value: ''

##### `tls_client_auth`

Data type: `String`

Whether to use TLS to authenticate clients. Can be 'disabled', 'optional',
or 'required'. Defaults to 'disabled'.

Default value: 'disabled'

##### `tls_client_auth_cert_file`

Data type: `String`

The path to the file (or directory) which stores the certificates of
trusted clients. Has no effect if tls_client_auth is 'disabled' or
tls_enable is false. Defaults to the empty string.

Default value: ''

##### `tls_enable`

Data type: `Boolean`

Whether to enable TLS for securing the input.

Default value: `false`

##### `tls_key_file`

Data type: `String`

The path to the private key which corresponds to the tls_cert_file. Has no
effect if tls_enable is false. Defaults to the empty string. Note that
for PEM private keys, Graylog is sensitive to exact formatting, e.g. there
must be a trailing newline.

Default value: ''

##### `tls_key_password`

Data type: `String`

The password to decrypt to private key specified in tls_key_file. Leave
blank if not using TLS, or if the key is not encrypted. Defaults to the
empty string.

Default value: ''

### graylog_api::input::gelf_tcp

Defines an input accepting GELF over TCP, optionally encrypted with TLS.

#### Parameters

The following parameters are available in the `graylog_api::input::gelf_tcp` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `decompress_size_limit`

Data type: `Integer`

The maximum number of bytes of decompressed message data will be accepted
in a single POST. Defaults to 8 megabytes.

Default value: .to_bytes

##### `max_message_size`

Data type: `Integer`

The maximum length of a message, in bytes. Default value is 2 megabytes.

Default value: .to_bytes

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 12280.

Default value: 12201

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 1 MB.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

##### `tcp_keepalive`

Data type: `Boolean`

Whether to enable TCP keepalive packets. Default is false.

Default value: `false`

##### `tls_cert_file`

Data type: `String`

The path to the server certificate to use when securing the connection with
TLS. Has no effect unless tls_enable is true. Defaults to the empty string.
Note that this must be the entire certificate chain, and that Graylog is
sensitive to exact formatting of PEM certificates, e.g. there must be a
trailing newline.

Default value: ''

##### `tls_client_auth`

Data type: `String`

Whether to use TLS to authenticate clients. Can be 'disabled', 'optional',
or 'required'. Defaults to 'disabled'.

Default value: 'disabled'

##### `tls_client_auth_cert_file`

Data type: `String`

The path to the file (or directory) which stores the certificates of
trusted clients. Has no effect if tls_client_auth is 'disabled' or
tls_enable is false. Defaults to the empty string.

Default value: ''

##### `tls_enable`

Data type: `Boolean`

Whether to enable TLS for securing the input.

Default value: `false`

##### `tls_key_file`

Data type: `String`

The path to the private key which corresponds to the tls_cert_file. Has no
effect if tls_enable is false. Defaults to the empty string. Note that
for PEM private keys, Graylog is sensitive to exact formatting, e.g. there
must be a trailing newline.

Default value: ''

##### `tls_key_password`

Data type: `String`

The password to decrypt to private key specified in tls_key_file. Leave
blank if not using TLS, or if the key is not encrypted. Defaults to the
empty string.

Default value: ''

##### `use_null_delimiter`

Data type: `Boolean`

Whether to use a null byte as a frame delimiter. If false, a newline is
used as the delimiter instead. Defaults to true.

Default value: `true`

### graylog_api::input::gelf_udp

Defines an input accepting GELF over UDP.

#### Parameters

The following parameters are available in the `graylog_api::input::gelf_udp` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `decompress_size_limit`

Data type: `Integer`

The maximum number of bytes of decompressed message data will be accepted
in a single POST. Defaults to 8 megabytes.

Default value: .to_bytes

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 12280.

Default value: 12201

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 256 kilobytes.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

### graylog_api::input::syslog_udp

Defines an input accepting Syslog messages over UDP.

#### Parameters

The following parameters are available in the `graylog_api::input::syslog_udp` defined type.

##### `ensure`

Data type: `Enum['present','absent']`

Whether this input should exist.

Default value: 'present'

##### `allow_override_date`

Data type: `Boolean`

Whether to allow setting the message timestamp to the current server time,
if the timstamp in the message failed to parse. Defaults to true.

Default value: `true`

##### `bind_address`

Data type: `String`

The IP address to listen on. Defaults to 0.0.0.0.

Default value: '0.0.0.0'

##### `expand_structured_data`

Data type: `Boolean`

Whether to expand structured data elements by prefixing attributes with
their SD-ID. Defaults to true.

Default value: `true`

##### `force_rdns`

Data type: `Boolean`

Whether to force reverse DNS resolution of sender's hostname. Use if the
hostname in the message cannot be parsed. Default value is false.
NOTE: Be careful with this setting if you are sending DNS server logs into
this input as it can cause a feedback loop.

Default value: `false`

##### `override_source`

Data type: `Optional[String]`

The source is a hostname derived from the received packet by default. Set
this if you want to override it with a custom string.

Default value: `undef`

##### `port`

Data type: `Stdlib::Port`

The port to listen on. Defaults to 514, however be aware that in many
server setups Graylog will not be able a privileged port without additional
configuration.

Default value: 514

##### `recv_buffer_size`

Data type: `Integer`

The size in bytes of the recvBufferSize for network connections to this
input. Defaults to 256 kilobytes.

Default value: .to_bytes

##### `scope`

Data type: `Enum['global','local']`

Whether this input is defined on all nodes ('global') or just this node
('local'). Default is global.

Default value: 'global'

##### `store_full_message`

Data type: `Boolean`

Whether to store the full original syslog message as full_message. Defaults
to true.

Default value: `true`

### graylog_api::pipeline

Define a processing pipeline. A convenience wrapper around graylog_pipeline
which prevents certain errors.
NOTE: This class is a work in progress in many ways. It's probably smarter
to use graylog_pipeline directly until this has been fleshed out more.
The main problem is that this defined type doesn't allow assigning stages
an explicit priority, insteading giving them priority in order counting
from 1.

#### Examples

##### Creating a pipeline where each stage is a single rule

```puppet
graylog_api::pipeline { 'example',
  description => 'an example pipeline',
  stages      => [
    'rule 1',
    'rule 2',
  ],
  streams     => ['All messages'],
}
```

##### Creating a pipeline where each stage has multiple rules

```puppet
graylog_api::pipeline { 'example':
  description => 'an example pipeline',
  stages      => [
    ['rule 1a', 'rule 1b'],
    ['rule 2a', 'rule 2b'],
  ],
  streams     => ['All messages'],
}
```

##### Creating a pipeline where stages have explicit match types

```puppet
graylog_api::pipeline { 'example':
  description => 'an example pipeline',
  stages      => [
    {
      match => 'all',
      rules => ['rule 1a', 'rule 1b'],
    },
    {
      match => 'either',
      rules => ['rule 2a', 'rule 2b'],
    },
  ],
  streams     => ['All messages'],
}
```

#### Parameters

The following parameters are available in the `graylog_api::pipeline` defined type.

##### `description`

Data type: `String`

The description of the pipeline.

Default value: ''

##### `stages`

Data type: `Array[Graylog_api::Pipeline::Stage::Loose]`

An array of stages. Each stage can be either:

  * A rule name - This rule will be given a stage to itself.
  * An array of rule names - These will be placed in a 'match all' stage.
  * A hash with two keys:
    + match - the match type of the stage, either 'all' or 'either'
    + rules - An array of rules in the stage.

Stage priority cannot be set manually using this defined type; the first
stage in the array will be stage 1, the second stage 2, etc. If you need to
set explicit stage priorities to control how multiple pipelines run in
parallel, use the graylog_pipeline native type directly.

##### `streams`

Data type: `Variant[String,Array[String]]`

An array of Stream names to connect the pipeline to. Note that these are
case-sensitive. Also note that, if the Pipeline Processor is running before
the Message Filter Chain, then the only stream that will have messages at
processing time will be the 'All messages' stream.

Default value: []

### graylog_api::pipeline::rule

Defines a pipeline rule. A convenience wrapper around graylog_pipeline_rule
which ensures no mismatch between the name in the rule source and the name
of the resource.

#### Examples

##### Creating a pipeline rule

```puppet
graylog_api::pipeline::rule { 'example':
  description => 'an example rule',
  condition   => 'has_field("foo")',
  action      => 'set_field("bar","baz");',
}
```

#### Parameters

The following parameters are available in the `graylog_api::pipeline::rule` defined type.

##### `description`

Data type: `String`

A description of the rule.

Default value: ''

##### `condition`

Data type: `String`

The condition in the 'when' clause of the rule. Defaults to true, e.g. by
default the rule will match all messages.

Default value: 'true'

##### `action`

Data type: `String`

The action to take if the rule matches. Defaults to the empty string (e.g.
no action is taken when the rule matches).

Default value: ''

## Resource types

### graylog_api

This sets the API credentials used by the rest of the types in the module
to communicate with the Graylog API. It does not actually represent a
concrete resource on the target system.

Example:

  graylog_api { 'api':
    password => $password,
    port     => 9000,
    username => 'admin',
  }

#### Properties

The following properties are available in the `graylog_api` type.

##### `password`

The API password used to connect to the Graylog server. Should be the password for the root user.

##### `username`

The API username used to connect to the Graylog server. Should be the username for the root user (default 'admin').

Default value: admin

##### `port`

the api port

#### Parameters

The following parameters are available in the `graylog_api` type.

##### `name`

Valid values: api

namevar

must be 'api'

### graylog_grok_pattern

Installs a Grok pattern. Note that when representing Grok patterns in
Puppet code or YAML-formatted Hiera data, extra escaping is necessary for
many regex characters. Thus, it is often more convenient to use the
graylog_api::grok::pattern_file defined type to define Grok patterns in
their own dedicated file.

Example:

  graylog_grok_pattern { 'EXAMPLE' }

#### Properties

The following properties are available in the `graylog_grok_pattern` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `pattern`

The literal pattern string.

#### Parameters

The following parameters are available in the `graylog_grok_pattern` type.

##### `name`

namevar

The token that represents the pattern. Must be in all-caps.

### graylog_index_set

Creates and configures an Index Set. Use the name 'Default index set' to
configure the pre-existing default index set created for new installations.

Example:

  graylog_index_set { 'Default index set':
    description                => 'The Graylog default index set',
    prefix                     => 'graylog',
    shards                     => 1,
    replicas                   => 0,
    rotation_strategy          => 'size',
    rotation_strategy_details  => {
      max_size => '10 GB'.to_bytes,
    },
    retention_strategy         => 'delete',
    retention_strategy_details => {
      max_number_of_indices => 10,
    },
  }

#### Properties

The following properties are available in the `graylog_index_set` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `description`

A description of the Index Set

##### `prefix`

A unique prefix used in Elasticsearch indices belonging to this index set. The prefix must start with a letter or number, and can only contain letters, numbers, '_', '-' and '+'.

##### `shards`

Number of Elasticsearch shards used per index in this index set.

##### `replicas`

Number of Elasticsearch replicas used per index in this index set.

##### `rotation_strategy`

Valid values: Puppet::Type::Graylog_index_set::ROTATION_STRATEGIES.keys

What type of rotation strategy to use

##### `rotation_strategy_details`

Configuration details for the chosen rotation strategy

##### `retention_strategy`

Valid values: Puppet::Type::Graylog_index_set::RETENTION_STRATEGIES.keys

What type of retention strategy to use

##### `retention_strategy_details`

Configuration details for the chosen rention strategy

##### `index_analyzer`

Elasticsearch analyzer for this index set.

Default value: standard

##### `max_segments`

Maximum number of segments per Elasticsearch index after optimization (force merge).

Default value: 1

##### `disable_index_optimization`

Disable Elasticsearch index optimization (force merge) after rotation.

Default value: false

#### Parameters

The following parameters are available in the `graylog_index_set` type.

##### `name`

namevar

The name of the Index Set

### graylog_input

Creates a new input. This type covers the raw API and is agnostic to the
type of input being created. In most cases, you should declare inputs using
the graylog_api::input::* defined types, which wrap this type and provide
properties for input-type-specific configuration. You can use this type
directly to configure an input type that doesn't have an existing wrapper.

Example:

  graylog_input { 'Example Beats input':
    ensure        => present,
    type          => 'org.graylog.plugins.beats.BeatsInput',
    scope         => 'global',
    configuration => {
      bind_address              => '0.0.0.0',
      recv_buffer_size          => '8 MB'.to_bytes,
      override_source           => 'Example override',
      port                      => 5044,
      tcp_keepalive             => false,
      tls_cert_file             => '',
      tls_client_auth           => false,
      tls_client_auth_cert_file => '',
      tls_enable                => false,
      tls_key_file              => '',
      tls_key_password          => '',
    },
  }

#### Properties

The following properties are available in the `graylog_input` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `type`

The type of the Input. Must be the Java class identifier for the input, such as org.graylog.plugins.beats.BeatsInput.

##### `scope`

Valid values: local, global

Whether this input is defined on all nodes ('global') or just this node ('local').

Default value: global

##### `configuration`

A hash of configuration values for the input; structure varies by input type.

#### Parameters

The following parameters are available in the `graylog_input` type.

##### `name`

namevar

The name of the Input Source

### graylog_ldap_settings

Configures LDAP authentication, include the mapping between LDAP Groups and
Graylog Roles. Make sure you also configure the Graylog Roles themselves
using the graylog_role type.

Example:

  graylog_ldap_settings { 'ldap':
    enabled                   => true,
    system_username           => 'CN=Graylog,OU=ServiceAccounts,DC=example,DC=com',
    system_password           => $password,
    ldap_uri                  => "ldap://1.2.3.4:389/",
    use_start_tls             => true,
    trust_all_certificates    => false,
    active_directory          => false,
    search_base               => 'OU=People,DC=example,DC=com',
    search_pattern            => '(&(objectClass=person)(uid={0}))',
    display_name_attribute    => 'displayName',
    default_group             => 'Reader',
    group_search_base         => 'OU=Groups,DC=example,DC=com',
    group_id_attribute        => 'cn',
    additional_default_groups => [],
    group_search_pattern      => '(objectClass=group)',
    group_mapping             => {
      'GraylogAdmins' => 'Admin',
      'Developers'    => 'PowerUser',
    },
  }

#### Properties

The following properties are available in the `graylog_ldap_settings` type.

##### `enabled`

Whether to enable LDAP authentication.

##### `system_username`

Username to bind to LDAP server as.

##### `system_password`

Password to bind to LDAP server with.

##### `ldap_uri`

URI of LDAP server, including protocol and port.

##### `use_start_tls`

Whether to use StartTLS

##### `trust_all_certificates`

Whether to automatically trust all certificates when using StartTLS or LDAPS.

##### `active_directory`

Whether the LDAP server is an active directory server.

##### `search_base`

The search base for user lookups.

##### `search_pattern`

The LDAP filter for user lookups.

##### `default_group`

The default group users are mapped to.

##### `group_mapping`

A hash mapping LDAP groups to Graylog roles.

##### `group_search_base`

The search base for group lookups.

##### `group_id_attribute`

The attribute by which LDAP groups are identified.

##### `additional_default_groups`

Additional groups to apply by default to all users.

##### `group_search_pattern`

The LDAP filter for group lookups.

##### `display_name_attribute`

The attribute for user display names.

#### Parameters

The following parameters are available in the `graylog_ldap_settings` type.

##### `name`

Valid values: ldap

namevar

Must be "ldap", only one instance of the graylog_ldap_settings type is allowed.

### graylog_lookup_adapter

Creates a Lookup Table Data Adapter.

Example:

  graylog_lookup_adapter { 'example-adapter':
    ensure        => present,
    display_name  => "Example Data",
    description   => "A CSV file of Example Data.",
    configuration => {
      type => 'csvfile',
      path => '/etc/graylog/lookup-table.csv',
      separator => ',',
      quotechar => '"',
      key_column => 'foo',
      value_column => 'bar',
      check_interval => 60,
      case_insensitive_lookup => true,
    },
    require     => File['/etc/graylog/lookup-table.csv'],
  }

#### Properties

The following properties are available in the `graylog_lookup_adapter` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `display_name`

The display name (Graylog calls this "title") of the Data Adapter

##### `description`

A description of the Data Adapter

##### `configuration`

A hash of configuration for the Data Adapter. The exact configuration properties support will vary depending on the type of adapter being used.

#### Parameters

The following parameters are available in the `graylog_lookup_adapter` type.

##### `name`

namevar

The unique name of the Data Adapter. Must consist of only letters, numbers and dashes.

### graylog_lookup_cache

Creates a Lookup Table Cache.

Example:

  graylog_lookup_cache { 'example-cache':
    ensure        => present,
    display_name  => 'Example Data',
    description   => 'A cache of example data.',
    configuration => {
      type                     => 'guava_cache',
      max_size                 => 1000,
      expire_after_access      => 60,
      expire_after_access_unit => 'SECONDS',
      expire_after_write       => 0,
      expire_after_write_unit  => undef,
    },
  }

#### Properties

The following properties are available in the `graylog_lookup_cache` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `display_name`

The display name (Graylog calls this "title") of the Lookup Cache.

##### `description`

A description of the Lookup Cache.

##### `configuration`

A hash of configuration for the Lookup Cache. The exact properties will vary depending on the type of cache being managed.

#### Parameters

The following parameters are available in the `graylog_lookup_cache` type.

##### `name`

namevar

The unique name of the Lookup Cache. Must consist of only letters, numbers and dashes.

### graylog_lookup_table

Configures a Lookup Table.

Example:

  graylog_lookup_table { 'example-data':
    ensure                    => present,
    display_name              => "Example Lookup Table",
    description               => 'A ookup table of example data.',
    adapter                   => 'example-adapter',
    cache                     => 'example-cache',
    default_single_value      => 'foo',
    default_single_value_type => 'STRING',
    default_multi_value       => '',
    default_multi_value_type  => 'NULL',
  }

#### Properties

The following properties are available in the `graylog_lookup_table` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `display_name`

The display name (Graylog calls this "title") of the Lookup Table.

##### `description`

A description of the Lookup Table.

##### `default_single_value`

The default value for a single-value lookup.

##### `default_single_value_type`

The default value type for a single-value lookup.

##### `default_multi_value`

The default value for a multi-value lookup.

##### `default_multi_value_type`

The default value type for a multi-value lookup.

##### `adapter`

The name of the Lookup Adapter used for this Lookup Table.

##### `cache`

The name of the Lookup Cache used for this Lookup Table.

#### Parameters

The following parameters are available in the `graylog_lookup_table` type.

##### `name`

namevar

The unique name of the Lookup Table. Must consist of only letters, numbers and dashes.

### graylog_pipeline

Creates a processing pipeline. This type takes the pipeline definition as
source text; note that the pipeline name in the source text must match the
resource title. Overall, you may find it more convenient to use the
graylog_api::pipeline defined type, which can take care of this for you, as
well as accepting e.g. an array of rules to apply rather than source text.

Example:

  graylog_pipeline { 'example pipeline':
    description       => 'An example processing pipleine',
    source            => @(END_OF_PIPELINE),
                        pipeline "everity"
                        stage 3 match either
                          rule "foo";
                          rule "bar";
                        stage 5 match all
                          rule "baz";
                        end
                        |-END_OF_PIPELINE
    connected_streams => ['All messages'],
  }

#### Properties

The following properties are available in the `graylog_pipeline` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `description`

A description of the processing pipeline.

##### `source`

The source code for the processing pipeline.

##### `connected_streams`

Streams to process with this pipeline. Note that case matters, here. \
Also note that, if the Pipeline Processor is running before the Message \
Filter Chain, then the only stream that will have messages at processing \
time will be the 'All messages' stream.

#### Parameters

The following parameters are available in the `graylog_pipeline` type.

##### `name`

namevar

The name of the processing pipeline.

### graylog_pipeline_rule

Creates a Pipeline Rule. Note that the rule name given in the rule source
must match the name of the resource as well. You may opt to use the
graylog_api::pipeline::rule defined type instead, which manages that
automatically.

Example:

  graylog_pipeline_rule { 'example':
    description => 'An example rule',
    source      => @(END_OF_RULE),
                   rule "example"
                   when
                     has_field("foo")
                   then
                     set_field("bar","baz");
                   end
                   |-END_OF
  }

#### Properties

The following properties are available in the `graylog_pipeline_rule` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `description`

A description of the pipeline rule.

##### `source`

The source code for the pipeline rule.

#### Parameters

The following parameters are available in the `graylog_pipeline_rule` type.

##### `name`

namevar

The name of the pipeline rule.

### graylog_role

A user role definition. Note that the Admin and Reader roles are built-in
and cannot be modified.

Example:

  graylog_role { 'example':
    description => 'An example user role',
    permissions => [
      'dashboards:create',
      'dashboards:edit',
      'dashboards:read',
      'savedsearches:read',
      'savedsearches:edit',
      'savedsearches:create',
      'searches:relative',
      'searches:keyword',
      'searches:absolute',
      'streams:read',
    ],
  }

#### Properties

The following properties are available in the `graylog_role` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `description`

A description of the role.

##### `permissions`

Permissions this role provides, see the /system/permissions API endpoint for list of valid permissions.

#### Parameters

The following parameters are available in the `graylog_role` type.

##### `name`

namevar

The name of the role

### graylog_stream

Creates a Stream configuration.

Example:

  graylog_stream { 'example':
    description => 'An example stream.',
    rules       => [
      {
        field => 'foo',
        type  => 'equals',
        value => 'bar',
      },
    ],
  }

#### Properties

The following properties are available in the `graylog_stream` type.

##### `ensure`

Valid values: present, absent

The basic property that the resource should be in.

Default value: present

##### `description`

A description of the stream.

##### `enabled`

Whether this stream is enabled.

Default value: true

##### `matching_type`

Valid values: AND, OR, and, or, all, any

Aliases: "and"=>"AND", "or"=>"OR", "all"=>"AND", "any"=>"OR"

Whether messages must match all rules, or any rule, to belong to the stream.

Default value: AND

##### `rules`

An array of rules which messages must match to be routed to this stream.
Each rule is a hash with the following keys:

  * field       - string, the name of the field being matched
  * type        - string, the type of match being performed; one of: equals, matches, greater_than, less_than, field_presence, contain, or always_match
  * value       - string or number, the value the field is being compared to; leave undef if no comparison is being made (e.g. for field_presence matcher)
  * inverted    - boolean, whether to negate the match condition
  * description - string, a description of the rule

##### `remove_matches_from_default_stream`

Whether messages that appear in this stream get removed from the default stream.

Default value: false

##### `index_set`

The name of the index set that stream operates on.

#### Parameters

The following parameters are available in the `graylog_stream` type.

##### `name`

namevar

The name of the stream.

